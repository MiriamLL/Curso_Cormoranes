<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Cormoranes</title>
    <meta charset="utf-8" />
    <meta name="author" content="Alonso, Carolina y Miriam" />
    <link href="CormoranesGrupo6_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="CormoranesGrupo6_files/remark-css-0.0.1/chocolate-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Cormoranes
## Grupo 6
### Alonso, Carolina y Miriam
### 2021/02/01

---

class: center, middle

# Biologging en cormoranes

---
class: center, middle

# Antecedentes

Tenemos datos de cormoranes de una isla en Peru.  

![](3Results/Cormoranes.jpg)

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/Cormoran.JPG", width="200", heigth="100"&gt;

--

1. Se muestrearon antes de la temporada de pesca (Apr) y despues (Jul).     

--

2. Se muestrearon hembras y machos.  

---
class: center, middle

# Justificacion

- Conocer si hay diferencias entre sexos en las areas y profundidades que utilizan para alimentarse nos ayuda a mejorar medidas de proteccion de la especie. 
--

- Asi como tener informacion de que sexo puede ser mas vulnerable a la temporada de pesca. 

---
class: center, middle
# Objetivos

Queremos saber:   
- Si las hembras bucean mas profundo o viajan mas lejos que los machos  

--

- Si los cormoranes bucean mas profundo o viajan mas lejos en Julio comparado con Abril.

---

# Metodologia

Primero importamos los excels de la carpeta.

Usando estos paquetes:

```r
library(here)
library(readxl)
```

Siguiendo este codigo:

```r
MainFolder&lt;-here()
DataFolder&lt;-paste0(MainFolder,'//0Excels')
files_Cormorant &lt;- list.files(DataFolder,
                              pattern="*.xlsx", 
                              full.names=TRUE)
List_Cormoranes &lt;- lapply(files_Cormorant, 
                          read_excel)
TracksCormoranes &lt;- do.call("rbind", 
                            List_Cormoranes)
```

---

## Unir tablas

Quitamos los NA's

```r
TracksCormoranes &lt;- TracksCormoranes[complete.cases(TracksCormoranes$Latitude),]
```

Queda asi



```r
str(Tracks)
```

```
tibble [1,185,421 x 9] (S3: tbl_df/tbl/data.frame)
 $ TagID      : chr [1:1185421] "AD01" "AD01" "AD01" "AD01" ...
 $ Date       : POSIXct[1:1185421], format: "2017-04-01" "2017-04-01" ...
 $ Time       : POSIXct[1:1185421], format: "1899-12-31 13:28:15" "1899-12-31 13:38:06" ...
 $ Depth      : num [1:1185421] 0 0 0 0 0 0 0 0 0 0 ...
 $ Temperature: num [1:1185421] 23.3 28.2 28.2 28.2 28.2 28.2 28.1 28.1 28.1 28.1 ...
 $ Latitude   : num [1:1185421] -6.95 -6.95 -6.95 -6.95 -6.95 ...
 $ Longitude  : num [1:1185421] -80.7 -80.7 -80.7 -80.7 -80.7 ...
 $ Height     : num [1:1185421] NA 42 26 20 24 20 20 22 22 22 ...
 $ Speed      : num [1:1185421] NA 33.3 33.3 33.3 33.3 33.3 33.3 37 33.3 33.3 ...
```

---

## Area de estudio
Usando estos paquetes

```r
library(ggplot2)
library(dplyr)
library(tidyr)
library(rnaturalearth)
library(rnaturalearthdata)
```

- Extraer cordenadas de la colonia

```r
MiColonia &lt;- Tracks %&gt;% 
  summarise(Longitude = first(Longitude),Latitude  = first(Latitude), )
```

- y graficar area de estudio

```r
world &lt;- ne_countries(scale = "medium", returnclass = "sf")
PlotAreadeEstudio&lt;-ggplot()+
    geom_sf(data = world) +
    coord_sf(xlim = c(-85, -65), ylim = c(-30, 0), expand = FALSE)+
    geom_point(data = MiColonia, aes(x = Longitude, y = Latitude), 
               color = "black",fill="white",
               size = 5,shape=21,stroke = 3)+
  geom_text(aes(x=-75,y=-10),label = "PERU", size=5)+
  theme_bw()
```

---
class: center

## Area de estudio



&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/PlotAreadeEstudio.jpg" width="400" height="500" /&gt;


---
## Tracks

Ver tracks

```r
PlotTracks&lt;-ggplot()+
    geom_sf(data = world) +
    coord_sf(xlim = c(-81.5, -79.5), ylim = c(-7.6, -6.6), expand = FALSE)+
    geom_point(data = MiColonia, aes(x = Longitude, y = Latitude), 
               color = "black",fill="white",
               size = 5,shape=21,stroke = 3)+
  geom_text(aes(x=-79.8,y=-6.8),label = "PERU", size=8)+
  geom_path(data = Tracks, aes(x = Longitude, y = Latitude, color=TagID))+
  geom_point(data = MiColonia,mapping = aes(x = Longitude, y = Latitude), 
             color = "black",fill="white", size = 5,shape=19, stroke = 3)+
  theme_bw()+
  theme(panel.border = element_rect(linetype = "solid", 
                                    colour = "black", size=1.5), 
        axis.title = element_blank(),
        axis.ticks.length = unit(3, "pt"),
        axis.text.x =  element_text(size=18),
        axis.text.y =  element_text(size=18),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_rect(fill = "white"),
        legend.position = "none") +
   labs(x = "Longitude", y="Latitude")+
   ggtitle('Tracks de todos los individuos')
```

---

## Tracks
Con el codigo anterior, generamos esto:
&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/PlotTracks.jpg" width="600" height="400" /&gt;



---

##  Calcular maximos de distancia de la colonia por individuo

Paquetes

```r
library(geosphere) #distm
library(rgeos) #coordinates
```

Transformamos a datos espaciales
- Los tracks:

```r
TracksSp&lt;-Tracks
TracksSp$lat&lt;-TracksSp$Latitude
TracksSp$lon&lt;-TracksSp$Longitude
coordinates(TracksSp)&lt;-~lon+lat
```

- y la colonia:

```r
LaColonia&lt;- SpatialPoints(cbind(MiColonia$Longitude,MiColonia$Latitude)) 
```

---

### Distancias en metros

Calculamos distancia en metros y transformamos a kilometros

```r
Metros&lt;-(distm(TracksSp,MiColonia,fun = distHaversine))
TracksDist&lt;-cbind(Tracks,Metros)
TracksDist$Km&lt;-TracksDist$Metros/1000
```


```r
head(TracksDist)
```

```
##   TagID       Date                Time Depth Temperature Latitude Longitude
## 1  AD01 2017-04-01 1899-12-31 13:28:15     0        23.3 -6.94793 -80.72884
## 2  AD01 2017-04-01 1899-12-31 13:38:06     0        28.2 -6.94793 -80.72884
## 3  AD01 2017-04-01 1899-12-31 13:38:07     0        28.2 -6.94798 -80.72881
## 4  AD01 2017-04-01 1899-12-31 13:38:08     0        28.2 -6.94806 -80.72876
## 5  AD01 2017-04-01 1899-12-31 13:38:09     0        28.2 -6.94813 -80.72870
## 6  AD01 2017-04-01 1899-12-31 13:38:10     0        28.2 -6.94821 -80.72864
##   Height Speed    Metros          Km
## 1     NA    NA  0.000000 0.000000000
## 2     42  33.3  0.000000 0.000000000
## 3     26  33.3  6.478402 0.006478402
## 4     20  33.3 16.957999 0.016957999
## 5     24  33.3 27.111081 0.027111081
## 6     20  33.3 38.209457 0.038209457
```

---

### Calculamos distancias por individuos.

Queremos saber la distancia maxima de cada individuo

```r
DistanciaColonia&lt;-TracksDist %&gt;%
  group_by(TagID) %&gt;%
   summarise_at(c("Km"), max, na.rm = TRUE) 
```


```r
head(DistanciaColonia,8)
```

```
## # A tibble: 8 x 2
##   TagID    Km
##   &lt;chr&gt; &lt;dbl&gt;
## 1 AD01   20.9
## 2 AD02   18.5
## 3 AD03   18.3
## 4 AD04   14.7
## 5 AD05   23.0
## 6 AD06   19.2
## 7 AD07   18.0
## 8 AD08   17.3
```

---

### Maximos de buceo por individuo


```r
Tracks$Depth&lt;-as.numeric(Tracks$Depth) 
```


```r
ProfundidadBuceos&lt;-Tracks %&gt;%
  group_by(TagID) %&gt;%
   summarise_at(c("Depth"), max, na.rm = TRUE) 
```


```r
head(ProfundidadBuceos,8)
```

```
## # A tibble: 8 x 2
##   TagID Depth
##   &lt;chr&gt; &lt;dbl&gt;
## 1 AD01  5.67 
## 2 AD02  0    
## 3 AD03  5.87 
## 4 AD04  0.280
## 5 AD05  8.83 
## 6 AD06  0    
## 7 AD07  9.26 
## 8 AD08  9.58
```

---

## Crear tabla

Importar datos de medidas

```r
Medidas&lt;-read_excel(here("./1Datos/Data_cormorantX.xlsx"))
colnames(Medidas)[1]&lt;-'TagID'
```

Unir medidas con distancias maximas y profundidades de buceo

```r
TablaDistancias&lt;-left_join(Medidas,DistanciaColonia,by='TagID')
TablaCompleta&lt;-left_join(TablaDistancias,ProfundidadBuceos,by='TagID')
```

Tabla completa:

```r
head(TablaCompleta)
```

```
## # A tibble: 6 x 8
##   TagID  Year Month Sex   Weight  Wing    Km Depth
##   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 AD01   2017 Apr   M      2399.  35    20.9 5.67 
## 2 AD02   2017 Apr   M      2392.  35.2  18.5 0    
## 3 AD03   2017 Apr   F      2450.  35.5  18.3 5.87 
## 4 AD04   2017 Apr   F      2609.  34.8  14.7 0.280
## 5 AD05   2017 Apr   F      2664   36    23.0 8.83 
## 6 AD06   2017 Apr   M      2278.  34.6  19.2 0
```


---

# Resultados

### Promedios de profundidades maximas de buceo


```r
TablaCompleta %&gt;%
  group_by(Sex,Month) %&gt;%
  summarise_at(c("Depth"), funs(mean, sd), na.rm = TRUE) 
```

```
## # A tibble: 4 x 4
## # Groups:   Sex [2]
##   Sex   Month  mean    sd
##   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 F     Apr    6.21  3.66
## 2 F     Jul   27.5   5.87
## 3 M     Apr    5.06  4.93
## 4 M     Jul   21.6   4.07
```

---

## Codigo para figura


```r
PlotBuceos&lt;-ggplot(TablaCompleta, aes(x=Month, y=Depth,fill=Sex))+
  xlab("Veda")+ylab("Profundidad de buceo maxima \n (m)")+
  geom_boxplot()+
    scale_fill_manual(values=c("#f4a261","#2a9d8f","#f4a261","#2a9d8f")) +
  theme_classic()+
  theme(axis.text.x =  element_text(size=12),
        axis.title.x = element_text(size=12),
        axis.text.y =  element_text(size=12),
        axis.title.y = element_text(size=12),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_blank(),
        legend.position = "top")
```

---

## Figura preliminar: buceos


&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/PlotBuceos.jpg" width="600" height="400" /&gt;

---

### Promedios de distancia maxima de la colonia

```r
TablaCompleta %&gt;%
  group_by(Sex,Month) %&gt;%
  summarise_at(c("Km"), funs(mean, sd), na.rm = TRUE) 
```

```
# A tibble: 4 x 4
# Groups:   Sex [2]
  Sex   Month  mean    sd
  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 F     Apr    17.4  3.66
2 F     Jul    34.8 14.8 
3 M     Apr    20.6  3.39
4 M     Jul    57.2 21.4 
```

---

### Codigo figura

```r
PlotDistancias&lt;-ggplot(TablaCompleta, aes(x=Month, y=Km,fill=Sex))+
  geom_boxplot()+
  xlab("Veda")+ylab("Distancia de la colonia \n (m)")+
  geom_boxplot()+
    scale_fill_manual(values=c("#f4a261","#2a9d8f","#f4a261","#2a9d8f")) +
  theme_classic()+
  theme(axis.text.x =  element_text(size=12),
        axis.title.x = element_text(size=12),
        axis.text.y =  element_text(size=12),
        axis.title.y = element_text(size=12),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        panel.background = element_blank(),
        legend.position = "top")
```

---
## Figura preliminar: distancias


&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/PlotDistancias.jpg" width="600" height="400" /&gt;

---

# Estadisticos


- Variables a probar: profundidad del buceo y distancia maxima
- Factores: Sexo y Meses (temporadas de pesca).



```r
str(TablaCompleta)
```

```
tibble [20 x 8] (S3: tbl_df/tbl/data.frame)
 $ TagID : chr [1:20] "AD01" "AD02" "AD03" "AD04" ...
 $ Year  : num [1:20] 2017 2017 2017 2017 2017 ...
 $ Month : chr [1:20] "Apr" "Apr" "Apr" "Apr" ...
 $ Sex   : chr [1:20] "M" "M" "F" "F" ...
 $ Weight: num [1:20] 2399 2392 2450 2609 2664 ...
 $ Wing  : num [1:20] 35 35.2 35.5 34.8 36 34.6 35.1 36 36.1 36.8 ...
 $ Km    : num [1:20] 20.9 18.5 18.3 14.7 23 ...
 $ Depth : num [1:20] 5.67 0 5.87 0.28 8.83 ...
```

---

# Estadisticos

- De acuerdo a nuestros objetivos lo mejor es usar una ANOVA de dos vias. 
- Para evaluar el efecto de dos variables (sexo y veda) en una variable de respuesta (maximo de buceos y distancia maxima de los viajes, respectivamente). 

--

Hipotesis a probar.
1. No hay diferencias en medias de Sexo.
2. No hay diferencias en medias de Veda.
3. No hay interaccion entre Sexo y Veda.

--

Factores: Sexo, Veda
--

Tamaño de muestra.
Nuestras muestras estan balanceadas:
 

```r
table(TablaCompleta$Month,TablaCompleta$Sex)
```

```
     
      F M
  Apr 5 5
  Jul 5 5
```

---

## Profundidad de buceo

```r
Mis_interacciones&lt;-aov(Depth~Sex+Month+Sex:Month, data=TablaCompleta)
summary(Mis_interacciones)
```

```
            Df Sum Sq Mean Sq F value   Pr(&gt;F)    
Sex          1   26.1    26.1   1.223    0.286    
Month        1 1659.9  1659.9  77.646 2.57e-07 ***
Sex:Month    1   26.5    26.5   1.239    0.283    
Residuals   15  320.7    21.4                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
1 observation deleted due to missingness
```

--

El tiempo (mes) de muestreo es significativo, independientemente del sexo.

---

### Supuestos

Paquete


Homogeneidad de las varianzas

```r
leveneTest(Depth~Sex:Month, data=TablaCompleta)
```

```
Levene's Test for Homogeneity of Variance (center = median)
      Df F value Pr(&gt;F)
group  3  0.4533 0.7188
      15               
```

Normalidad de los residuales

```r
aov_residuals &lt;- residuals(object = Mis_interacciones)
shapiro.test(x = aov_residuals )
```

```

	Shapiro-Wilk normality test

data:  aov_residuals
W = 0.93973, p-value = 0.2607
```


```r
#plot(Mis_interacciones,1)
#plot(Mis_interacciones,2)
```

---

### Anovas de dos vias
Para las distancias lo transformamos a escala logaritmica para la normalidad de los residuales. 

```r
modeloKm&lt;-aov(formula=log(Km)~Sex*Month,data=TablaCompleta)
summary(modeloKm)
```

```
            Df Sum Sq Mean Sq F value   Pr(&gt;F)    
Sex          1  0.700   0.700   8.199   0.0118 *  
Month        1  3.182   3.182  37.295 2.01e-05 ***
Sex:Month    1  0.142   0.142   1.663   0.2167    
Residuals   15  1.280   0.085                     
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
1 observation deleted due to missingness
```

--

El tiempo de muestreo es significativo y sexo tambien pero no hay interaccion entre ambos.


---

### Supuestos

Homogeneidad de las varianzas

```r
leveneTest(log(Km)~Sex:Month, data=TablaCompleta)
```

```
Levene's Test for Homogeneity of Variance (center = median)
      Df F value Pr(&gt;F)
group  3  2.3255 0.1161
      15               
```

Normalidad

```r
aov_residuals &lt;- residuals(object = modeloKm)
shapiro.test(x = aov_residuals)
```

```

	Shapiro-Wilk normality test

data:  aov_residuals
W = 0.95438, p-value = 0.4674
```

---

## Mapas

Funcion para crear mapas

```r
Ploteame&lt;-function(Datos=Datos){
  MiPlot&lt;-ggplot()+
    geom_sf(data = world) +
    coord_sf(xlim = c(-81, -80), ylim = c(-7.5, -6.5), expand = FALSE)+
    geom_path(data = Datos, aes(x = Longitude, y = Latitude, color=TagID), size=1)+
  theme_bw()+
  theme(panel.border = element_rect(linetype = "solid", colour = "black", size=1.5),
        axis.title = element_text(size=8),
        axis.ticks.length = unit(3, "pt"),
        axis.text.x =  element_text(size=8),
        axis.text.y =  element_text(size=8),
        panel.grid.major = element_blank(), 
        panel.grid.minor = element_blank(),
        legend.title = element_text(size=8),
        legend.text = element_text(size=8),
        panel.background = element_rect(fill = "white"),
        legend.justification=c(0,0), 
        legend.position='top') + 
   labs(x = "Longitude", y="Latitude")+
   geom_point(data = MiColonia, mapping = aes(x = Longitude, y = Latitude), 
             color = "black", fill="white", size = 5,shape=21,stroke = 3)
  return(MiPlot)
}
```

---

# Crear un mapa por sexo y mes
Agregar medidas a Tracks

```r
TracksC&lt;-left_join(Tracks,Medidas,by='TagID')
```

Creamos mapas por sexo y etapa (usando la funcion de 'Ploteame') 

```r
FA&lt;-subset(TracksC,TracksC$Sex=='F' &amp; TracksC$Month=='Apr')
MapaA&lt;-Ploteame(Datos=FA)+
  ggtitle('Hembras durante de la veda (Abr)')
```


```r
FD&lt;-subset(TracksC,TracksC$Sex=='F' &amp; TracksC$Month=='Jul')
MapaB&lt;-Ploteame(Datos=FD)+
  ggtitle('Hembras despues de la veda (Jul)')
```


```r
MA&lt;-subset(TracksC,TracksC$Sex=='M' &amp; TracksC$Month=='Apr')
MapaC&lt;-Ploteame(Datos=MA)+
  ggtitle('Machos antes de la veda (Apr)')
```


```r
MD&lt;-subset(TracksC,TracksC$Sex=='M' &amp; TracksC$Month=='Jul')
MapaD&lt;-Ploteame(Datos=MD)+
  ggtitle('Machos despues de la veda (Jul)')
```

---

# Unir mapas

Paquete

```r
library(cowplot)
```

Unir plot

```r
MapasSexoVeda&lt;-plot_grid(MapaA,MapaB,
                         MapaC,MapaD,ncol = 2, nrow=2)
```



---
class: center

# Tracks separados por sexo y veda
&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/MapasSexoVeda.jpg" width="600" height="500" /&gt;

---

class: center

# Conclusiones

- Las hembras bucean mas profundo o viajan mas lejos que los machos?
- Estos analisis preliminares sugieren que **no** hay diferencias significativas en la profundidad de buceo entre hembras y machos pero **si hay diferencias** entre antes y despues de la veda.


&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/PlotBuceos.jpg" width="400" height="300" /&gt;


---
class: center

# Conclusiones

- Los cormoranes bucean mas profundo o viajan mas lejos en Julio comparado con Abril?
- Estos analisis preliminares sugieren que **si** hay diferencias significativas entre hembras y machos y entre antes y despues de la veda. Los machos viajan mas lejos que las hembras y ambos viajan mas lejos en Julio.

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_Cormoranes/main/MapasSexoVeda.jpg" width="500" height="300" /&gt;

Nota: ***Son solo maximos, no hicimos correccion de ceros ni calculamos promedios por individuo***



---

## Todo el material en

https://github.com/MiriamLL/Curso_Cormoranes

--

## Gracias 

&lt;img src="https://scontent.fham2-1.fna.fbcdn.net/v/t1.0-9/125369794_1017592122068396_8216067479374620034_o.png?_nc_cat=107&amp;ccb=2&amp;_nc_sid=09cbfe&amp;_nc_ohc=Zs_v8fI_zW8AX-BDdkX&amp;_nc_ht=scontent.fham2-1.fna&amp;oh=a34c8fc4c28cc3d838702576ed65b1a0&amp;oe=6033C883" width="300" height="200" /&gt;
!



😄
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
